<div
  class="credits-container"
  [class.mobile]="isMobile()"
>
  <div class="flex flex-row gap-3 flex-wrap align-items-center mb-4">
    <div class="pill-toggle">
      @for (option of departmentOptions; track option.value) {
        <button
          class="pill-btn"
          [class.active]="department === option.value"
          (click)="setDepartment(option.value)"
        >
          {{ option.label }}
        </button>
      }
    </div>
    @if (mediaOptions.length > 2) {
      <div class="pill-toggle">
        @for (option of mediaOptions; track option.value) {
          <button
            class="pill-btn"
            [class.active]="media === option.value"
            (click)="setMedia(option.value)"
          >
            {{ option.label }}
          </button>
        }
      </div>
    }
  </div>

  @for (group of yearGroups; track group.year) {
    <div class="year-group">
      <div class="year-label">{{ group.year }}</div>
      <div class="year-items">
        @for (item of group.items; track item.id) {
          <a
            class="credit-item"
            [routerLink]="['/details', item.media_type, item.id]"
          >
            <img
              class="credit-poster"
              src="{{ (item.poster_path || item.backdrop_path || '') | imgSrc: 'w92' }}"
              alt=""
            />
            <div class="credit-info">
              <strong>{{ item.title || item.name }}</strong>
              @if (item.character) {
                <span class="credit-role">as {{ item.character }}</span>
              }
              @if (item.job) {
                <span class="credit-role">{{ item.job }}</span>
              }
            </div>
            <span class="credit-type">{{ item.media_type === 'movie' ? 'Movie' : 'TV' }}</span>
          </a>
        }
      </div>
    </div>
  }
</div>
